(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"91aH":function(t,e,n){"use strict";n.r(e),n.d(e,"StoryDetailPageModule",(function(){return O}));var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),s=n("mrSG"),a=n("fXoL"),b=n("JZ6Q"),d=n("lGQG");function l(t,e){if(1&t){const t=a.Pb();a.Ob(0,"ion-button",12),a.Wb("click",(function(){return a.ic(t),a.Yb(2).edit()})),a.nc(1," Edit the story "),a.Nb()}}function f(t,e){if(1&t){const t=a.Pb();a.Ob(0,"ion-button",13),a.Wb("click",(function(){a.ic(t);const e=a.Yb().ngIf;return a.Yb().delete(e.imagePath)})),a.nc(1," Delete "),a.Nb()}}function h(t,e){if(1&t){const t=a.Pb();a.Ob(0,"ion-col",4),a.Ob(1,"ion-card"),a.Kb(2,"ion-img",5),a.Ob(3,"ion-card-content"),a.Ob(4,"ion-card-header"),a.Ob(5,"ion-card-title"),a.Ob(6,"h1"),a.nc(7),a.Nb(),a.Nb(),a.Ob(8,"ion-card-subtitle"),a.nc(9),a.Nb(),a.Nb(),a.Kb(10,"hr"),a.Ob(11,"ion-text",6),a.nc(12),a.Nb(),a.Kb(13,"br"),a.Kb(14,"br"),a.Ob(15,"ion-text",7),a.Ob(16,"h2"),a.nc(17),a.Nb(),a.Ob(18,"ion-button",8),a.Wb("click",(function(){a.ic(t);const n=e.ngIf;return a.Yb().triggerLike(n.likes,n.id)})),a.Kb(19,"i"),a.Nb(),a.Nb(),a.Nb(),a.Ob(20,"ion-row"),a.Ob(21,"ion-col",9),a.lc(22,l,2,0,"ion-button",10),a.Nb(),a.Ob(23,"ion-col",9),a.lc(24,f,2,0,"ion-button",11),a.Nb(),a.Nb(),a.Nb(),a.Nb()}if(2&t){const t=e.ngIf,n=a.Yb();a.yb(2),a.dc("src",t.imageUrl),a.yb(5),a.oc(t.title),a.yb(2),a.oc(t.description),a.yb(3),a.pc(" ",t.story," "),a.yb(5),a.pc("",t.likes," people likes this story"),a.yb(2),a.Ab(n.liked),a.yb(3),a.dc("ngIf",t.authorId===n.auth.user),a.yb(2),a.dc("ngIf",t.authorId===n.auth.user)}}function u(t,e){1&t&&a.Kb(0,"ion-col",4)}const g=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i){this.route=t,this.router=e,this.storyService=n,this.auth=o,this.alert=i,this.liked="far fa-heart",this.storyId=this.route.snapshot.paramMap.get("id")}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){this.stories$=this.storyService.getStory(this.storyId);const t=yield this.storyService.likedStories();t&&t.includes(this.storyId)&&(this.liked="fas fa-heart")}))}triggerLike(t,e){this.storyService.updateLike(e,t,"far fa-heart"===this.liked?"increase":"decrease"),this.liked="fas fa-heart"===this.liked?"far fa-heart":"fas fa-heart"}edit(){this.router.navigate(["","add-story"],{queryParams:{id:this.storyId,edit:"true"}})}delete(t){console.log(t),this.alert.create({header:"Confirm",message:"Are you sure you want to delete this story?",buttons:[{role:"cancel",text:"No"},{text:"Yes",handler:()=>{this.storyService.deleteStory(t,this.storyId).then(()=>{this.router.navigate(["","feed"])})}}]}).then(t=>{t.present()})}ionViewWillLeave(){"fas fa-heart"===this.liked?this.storyService.markFavourite(this.storyId):this.storyService.removeFromFavourite(this.storyId)}}return t.\u0275fac=function(e){return new(e||t)(a.Jb(c.a),a.Jb(c.g),a.Jb(b.a),a.Jb(d.a),a.Jb(r.a))},t.\u0275cmp=a.Db({type:t,selectors:[["app-story-detail"]],decls:13,vars:4,consts:[["slot","start"],["defaultHref","/feed"],["size-md","8","offset-md","2",4,"ngIf","ngIfElse"],["loading",""],["size-md","8","offset-md","2"],[3,"src"],["color","primary"],["color","seconday"],["size","large","fill","clear","color","danger",3,"click"],["size","6"],["expand","block",3,"click",4,"ngIf"],["expand","block","color","danger",3,"click",4,"ngIf"],["expand","block",3,"click"],["expand","block","color","danger",3,"click"]],template:function(t,e){if(1&t&&(a.Ob(0,"ion-header"),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-title"),a.nc(3," StoryBooks "),a.Nb(),a.Ob(4,"ion-buttons",0),a.Kb(5,"ion-back-button",1),a.Nb(),a.Nb(),a.Nb(),a.Ob(6,"ion-content"),a.Ob(7,"ion-grid"),a.Ob(8,"ion-row"),a.lc(9,h,25,9,"ion-col",2),a.Zb(10,"async"),a.lc(11,u,1,0,"ng-template",null,3,a.mc),a.Nb(),a.Nb(),a.Nb()),2&t){const t=a.hc(12);a.yb(9),a.dc("ngIf",a.ac(10,2,e.stories$))("ngIfElse",t)}},directives:[r.o,r.I,r.H,r.f,r.c,r.d,r.m,r.n,r.y,o.j,r.l,r.g,r.p,r.h,r.i,r.k,r.j,r.E,r.e],pipes:[o.b],styles:["*[_ngcontent-%COMP%]{color:#fff}ion-card[_ngcontent-%COMP%]{background:#4a3933}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:1.2rem}ion-card[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:1.1rem}ion-card[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start:0;--padding-bottom:0}"]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(g)],c.j]}),t})(),O=(()=>{class t{}return t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({factory:function(e){return new(e||t)},imports:[[o.c,i.f,r.J,y]]}),t})()}}]);