!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"91aH":function(n,o,i){"use strict";i.r(o),i.d(o,"StoryDetailPageModule",(function(){return N}));var r=i("ofXK"),c=i("3Pt+"),a=i("TEn/"),s=i("tyNb"),b=i("mrSG"),d=i("fXoL"),l=i("JZ6Q"),u=i("lGQG");function f(t,e){if(1&t){var n=d.Pb();d.Ob(0,"ion-button",12),d.Wb("click",(function(){return d.ic(n),d.Yb(2).edit()})),d.nc(1," Edit the story "),d.Nb()}}function h(t,e){if(1&t){var n=d.Pb();d.Ob(0,"ion-button",13),d.Wb("click",(function(){d.ic(n);var t=d.Yb().ngIf;return d.Yb().delete(t.imagePath)})),d.nc(1," Delete "),d.Nb()}}function g(t,e){if(1&t){var n=d.Pb();d.Ob(0,"ion-col",4),d.Ob(1,"ion-card"),d.Kb(2,"ion-img",5),d.Ob(3,"ion-card-content"),d.Ob(4,"ion-card-header"),d.Ob(5,"ion-card-title"),d.Ob(6,"h1"),d.nc(7),d.Nb(),d.Nb(),d.Ob(8,"ion-card-subtitle"),d.nc(9),d.Nb(),d.Nb(),d.Kb(10,"hr"),d.Ob(11,"ion-text",6),d.nc(12),d.Nb(),d.Kb(13,"br"),d.Kb(14,"br"),d.Ob(15,"ion-text",7),d.Ob(16,"h2"),d.nc(17),d.Nb(),d.Ob(18,"ion-button",8),d.Wb("click",(function(){d.ic(n);var t=e.ngIf;return d.Yb().triggerLike(t.likes,t.id)})),d.Kb(19,"i"),d.Nb(),d.Nb(),d.Nb(),d.Ob(20,"ion-row"),d.Ob(21,"ion-col",9),d.lc(22,f,2,0,"ion-button",10),d.Nb(),d.Ob(23,"ion-col",9),d.lc(24,h,2,0,"ion-button",11),d.Nb(),d.Nb(),d.Nb(),d.Nb()}if(2&t){var o=e.ngIf,i=d.Yb();d.yb(2),d.dc("src",o.imageUrl),d.yb(5),d.oc(o.title),d.yb(2),d.oc(o.description),d.yb(3),d.pc(" ",o.story," "),d.yb(5),d.pc("",o.likes," people likes this story"),d.yb(2),d.Ab(i.liked),d.yb(3),d.dc("ngIf",o.authorId===i.auth.user),d.yb(2),d.dc("ngIf",o.authorId===i.auth.user)}}function y(t,e){1&t&&d.Kb(0,"ion-col",4)}var p,O,k,v=[{path:"",component:(p=function(){function n(e,o,i,r,c){t(this,n),this.route=e,this.router=o,this.storyService=i,this.auth=r,this.alert=c,this.liked="far fa-heart",this.storyId=this.route.snapshot.paramMap.get("id")}var o,i,r;return o=n,(i=[{key:"ngOnInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stories$=this.storyService.getStory(this.storyId),t.next=3,this.storyService.likedStories();case 3:(e=t.sent)&&e.includes(this.storyId)&&(this.liked="fas fa-heart");case 5:case"end":return t.stop()}}),t,this)})))}},{key:"triggerLike",value:function(t,e){this.storyService.updateLike(e,t,"far fa-heart"===this.liked?"increase":"decrease"),this.liked="fas fa-heart"===this.liked?"far fa-heart":"fas fa-heart"}},{key:"edit",value:function(){this.router.navigate(["","add-story"],{queryParams:{id:this.storyId,edit:"true"}})}},{key:"delete",value:function(t){var e=this;console.log(t),this.alert.create({header:"Confirm",message:"Are you sure you want to delete this story?",buttons:[{role:"cancel",text:"No"},{text:"Yes",handler:function(){e.storyService.deleteStory(t,e.storyId).then((function(){e.router.navigate(["","feed"])}))}}]}).then((function(t){t.present()}))}},{key:"ionViewWillLeave",value:function(){"fas fa-heart"===this.liked?this.storyService.markFavourite(this.storyId):this.storyService.removeFromFavourite(this.storyId)}}])&&e(o.prototype,i),r&&e(o,r),n}(),p.\u0275fac=function(t){return new(t||p)(d.Jb(s.a),d.Jb(s.g),d.Jb(l.a),d.Jb(u.a),d.Jb(a.a))},p.\u0275cmp=d.Db({type:p,selectors:[["app-story-detail"]],decls:13,vars:4,consts:[["slot","start"],["defaultHref","/feed"],["size-md","8","offset-md","2",4,"ngIf","ngIfElse"],["loading",""],["size-md","8","offset-md","2"],[3,"src"],["color","primary"],["color","seconday"],["size","large","fill","clear","color","danger",3,"click"],["size","6"],["expand","block",3,"click",4,"ngIf"],["expand","block","color","danger",3,"click",4,"ngIf"],["expand","block",3,"click"],["expand","block","color","danger",3,"click"]],template:function(t,e){if(1&t&&(d.Ob(0,"ion-header"),d.Ob(1,"ion-toolbar"),d.Ob(2,"ion-title"),d.nc(3," StoryBooks "),d.Nb(),d.Ob(4,"ion-buttons",0),d.Kb(5,"ion-back-button",1),d.Nb(),d.Nb(),d.Nb(),d.Ob(6,"ion-content"),d.Ob(7,"ion-grid"),d.Ob(8,"ion-row"),d.lc(9,g,25,9,"ion-col",2),d.Zb(10,"async"),d.lc(11,y,1,0,"ng-template",null,3,d.mc),d.Nb(),d.Nb(),d.Nb()),2&t){var n=d.hc(12);d.yb(9),d.dc("ngIf",d.ac(10,2,e.stories$))("ngIfElse",n)}},directives:[a.o,a.I,a.H,a.f,a.c,a.d,a.m,a.n,a.y,r.j,a.l,a.g,a.p,a.h,a.i,a.k,a.j,a.E,a.e],pipes:[r.b],styles:["*[_ngcontent-%COMP%]{color:#fff}ion-card[_ngcontent-%COMP%]{background:#4a3933}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:1.2rem}ion-card[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:1.1rem}ion-card[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start:0;--padding-bottom:0}"]}),p)}],m=((k=function e(){t(this,e)}).\u0275mod=d.Hb({type:k}),k.\u0275inj=d.Gb({factory:function(t){return new(t||k)},imports:[[s.j.forChild(v)],s.j]}),k),N=((O=function e(){t(this,e)}).\u0275mod=d.Hb({type:O}),O.\u0275inj=d.Gb({factory:function(t){return new(t||O)},imports:[[r.c,c.f,a.J,m]]}),O)}}])}();