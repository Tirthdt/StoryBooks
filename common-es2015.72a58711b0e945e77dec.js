(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/6H":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("A36C"),n=r("iWo5"),o=r("qULd");const a=(t,e)=>{let r,a;const s=(t,i,n)=>{if("undefined"==typeof document)return;const o=document.elementFromPoint(t,i);o&&e(o)?o!==r&&(l(),c(o,n)):l()},c=(t,e)=>{r=t,a||(a=r);const n=r;Object(i.f)(()=>n.classList.add("ion-activated")),e()},l=(t=!1)=>{if(!r)return;const e=r;Object(i.f)(()=>e.classList.remove("ion-activated")),t&&a!==r&&r.click(),r=void 0};return Object(n.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>s(t.currentX,t.currentY,o.a),onMove:t=>s(t.currentX,t.currentY,o.b),onEnd:()=>{l(!0),Object(o.e)(),a=void 0}})}},"74mu":function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return s}));const i=(t,e)=>null!==e.closest(t),n=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},e):e,o=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},a=/^[a-z][a-z0-9+\-.]*:/,s=async(t,e,r,i)=>{if(null!=t&&"#"!==t[0]&&!a.test(t)){const n=document.querySelector("ion-router");if(n)return null!=e&&e.preventDefault(),n.push(t,r,i)}return!1}},JZ6Q:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var i=r("mrSG"),n=r("lJxs"),o=r("eIep"),a=r("Jgta"),s=r("LRne"),c=r("itXk"),l=r("fXoL"),u=r("I/3d"),d=r("Vaw3"),g=r("sSZD"),h=r("lGQG");let p=(()=>{class t{constructor(t,e,r,i){this.angularFireStore=t,this.storage=e,this.db=r,this.auth=i}addStory(t){const e=`StoryImages/${(new Date).getTime()}_${t.image.name}`,r=this.storage.ref(e);return this.storage.upload(e,t.image).then(t=>r.getDownloadURL().toPromise()).then(r=>this.angularFireStore.collection("Stories").add({title:t.title,description:t.description,authorId:t.authorid,story:t.story,imageUrl:r,imagePath:e,likes:0,createdAt:a.a.firestore.FieldValue.serverTimestamp()})).catch(t=>{console.log(t)})}getRecentStories(){return this.angularFireStore.collection("Stories",t=>t.orderBy("createdAt","desc").limit(2)).snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.id,r=t.payload.doc.data();return Object.assign(Object.assign({},r),{id:e})})))}getAllStories(){return this.angularFireStore.collection("Stories").snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.id,r=t.payload.doc.data();return Object.assign(Object.assign({},r),{id:e})})))}getStoryForUser(){return this.angularFireStore.collection("Stories",t=>t.where("authorId","==",this.auth.user||localStorage.getItem("userId"))).snapshotChanges().pipe(Object(n.a)(t=>t?t.map(t=>{const e=t.payload.doc.id,r=t.payload.doc.data();return Object.assign(Object.assign({},r),{id:e})}):Object(s.a)([])))}getStory(t){return this.angularFireStore.collection("Stories").doc(t).snapshotChanges().pipe(Object(n.a)(t=>{if("removed"===t.type)return{id:"dummy",data:null};const e=t.payload.id,r=t.payload.data();return Object.assign({id:e},r)}),Object(o.a)(t=>"dummy"===t.id?Object(s.a)("null"):this.angularFireStore.collection("Users").doc(t.authorId).get().pipe(Object(n.a)(e=>Object.assign(Object.assign({},e.data()),t)))))}editStory(t,e){if(e.image){this.storage.ref(e.path).delete();const r=`StoryImages/${(new Date).getTime()}_${e.image.name}`,i=this.storage.ref(r);return this.storage.upload(r,e.image).then(t=>i.getDownloadURL().toPromise()).then(i=>this.angularFireStore.collection("Stories").doc(t).update({title:e.title,description:e.description,authorId:e.authorId,story:e.story,imageUrl:i,imagePath:r})).catch(t=>{console.log(t)})}return this.angularFireStore.collection("Stories").doc(t).update({title:e.title,story:e.story,description:e.description})}updateLike(t,e,r){return this.angularFireStore.collection("Stories").doc(t).update({likes:"increase"===r?e+1:e-1})}markFavourite(t){const e=this.auth.user||localStorage.getItem("userId");this.db.database.ref(e+"/likedStories").once("value").then(r=>r.val()?Object.values(r.val()).includes(t)?void 0:this.db.database.ref(e+"/likedStories").push(t):this.db.database.ref(e+"/likedStories").set([t]))}removeFromFavourite(t){const e=this.auth.user||localStorage.getItem("userId");this.db.database.ref(e+"/likedStories").once("value").then(r=>{const i=Object.values(r.val()).filter(e=>e!==t);return this.db.database.ref(e+"/likedStories").set(i)})}deleteStory(t,e){return this.storage.ref(t).delete(),this.angularFireStore.collection("Stories").doc(e).delete()}likedStories(){return Object(i.a)(this,void 0,void 0,(function*(){const t=this.auth.user||localStorage.getItem("userId"),e=yield(yield this.db.database.ref(t+"/likedStories").once("value")).val();return e?Object.values(e):null}))}getLikedStories(){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield this.likedStories();if(t){const e=t.map(t=>this.getStory(t));return Object(c.a)(e)}return Object(s.a)([])}))}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(u.a),l.Sb(d.a),l.Sb(g.a),l.Sb(h.a))},t.\u0275prov=l.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ZaV5:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n}));const i=async(t,e,r,i,n)=>{if(t)return t.attachViewToDom(e,r,n,i);if("string"!=typeof r&&!(r instanceof HTMLElement))throw new Error("framework delegate is missing");const o="string"==typeof r?e.ownerDocument&&e.ownerDocument.createElement(r):r;return i&&i.forEach(t=>o.classList.add(t)),n&&Object.assign(o,n),e.appendChild(o),o.componentOnReady&&await o.componentOnReady(),o},n=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},h3R7:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));const i={bubbles:{dur:1e3,circles:9,fn:(t,e,r)=>{const i=t*e/r-t+"ms",n=2*Math.PI*e/r;return{r:5,style:{top:9*Math.sin(n)+"px",left:9*Math.cos(n)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(t,e,r)=>{const i=e/r,n=t*i-t+"ms",o=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":n}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,r)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/r-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,r)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/r-t+"ms"}})}}},lGQG:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var i=r("2Vo4"),n=r("fXoL"),o=r("UbJi"),a=r("I/3d");let s=(()=>{class t{constructor(t,e){this.auth=t,this.angularfire=e,this.userId=new i.a(null),this.auth.onAuthStateChanged(t=>{t?(this.userId.next(t.uid),localStorage.setItem("userId",t.uid)):(this.userId.next(null),localStorage.getItem("userId")&&localStorage.removeItem("userId"))})}getUserInfo(){return this.angularfire.collection("Users").doc(this.user||localStorage.getItem("userId")).valueChanges()}get user(){return this.userId.value||localStorage.getItem("userId")}signup({email:t,password:e}){return console.log(),this.auth.createUserWithEmailAndPassword(t,e)}login({email:t,password:e}){return this.auth.signInWithEmailAndPassword(t,e)}signout(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(o.a),n.Sb(a.a))},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},qULd:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return s}));const i={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const r=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:r})},notification(t){const e=this.getEngine();if(!e)return;const r=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:r})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},n=()=>{i.selection()},o=()=>{i.selectionStart()},a=()=>{i.selectionChanged()},s=()=>{i.selectionEnd()},c=t=>{i.impact(t)}}}]);