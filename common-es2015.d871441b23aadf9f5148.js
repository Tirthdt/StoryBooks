(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/6H":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("A36C"),i=r("iWo5"),o=r("qULd");const s=(t,e)=>{let r,s;const a=(t,n,i)=>{if("undefined"==typeof document)return;const o=document.elementFromPoint(t,n);o&&e(o)?o!==r&&(l(),c(o,i)):l()},c=(t,e)=>{r=t,s||(s=r);const i=r;Object(n.f)(()=>i.classList.add("ion-activated")),e()},l=(t=!1)=>{if(!r)return;const e=r;Object(n.f)(()=>e.classList.remove("ion-activated")),t&&s!==r&&r.click(),r=void 0};return Object(i.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>a(t.currentX,t.currentY,o.a),onMove:t=>a(t.currentX,t.currentY,o.b),onEnd:()=>{l(!0),Object(o.e)(),s=void 0}})}},"74mu":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return a}));const n=(t,e)=>null!==e.closest(t),i=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},e):e,o=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},s=/^[a-z][a-z0-9+\-.]*:/,a=async(t,e,r,n)=>{if(null!=t&&"#"!==t[0]&&!s.test(t)){const i=document.querySelector("ion-router");if(i)return null!=e&&e.preventDefault(),i.push(t,r,n)}return!1}},JZ6Q:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var n=r("mrSG"),i=r("lJxs"),o=r("eIep"),s=r("Jgta"),a=r("LRne"),c=r("itXk"),l=r("fXoL"),u=r("I/3d"),d=r("Vaw3"),h=r("sSZD"),g=r("lGQG");let f=(()=>{class t{constructor(t,e,r,n){this.angularFireStore=t,this.storage=e,this.db=r,this.auth=n}addStory(t){const e=`StoryImages/${(new Date).getTime()}_${t.image.name}`,r=this.storage.ref(e);return this.storage.upload(e,t.image).then(t=>r.getDownloadURL().toPromise()).then(r=>this.angularFireStore.collection("Stories").add({title:t.title,description:t.description,authorId:t.authorid,story:t.story,imageUrl:r,imagePath:e,likes:0,createdAt:s.a.firestore.FieldValue.serverTimestamp()})).catch(t=>{console.log(t)})}getAllStories(){return this.angularFireStore.collection("Stories").snapshotChanges().pipe(Object(i.a)(t=>t.map(t=>{const e=t.payload.doc.id,r=t.payload.doc.data();return Object.assign(Object.assign({},r),{id:e})})))}getStoryForUser(){return this.angularFireStore.collection("Stories",t=>t.where("authorId","==",this.auth.user||localStorage.getItem("userId"))).snapshotChanges().pipe(Object(i.a)(t=>t?t.map(t=>{const e=t.payload.doc.id,r=t.payload.doc.data();return Object.assign(Object.assign({},r),{id:e})}):Object(a.a)([])))}getStory(t){return this.angularFireStore.collection("Stories").doc(t).snapshotChanges().pipe(Object(i.a)(t=>{if("removed"===t.type)return{id:"dummy",data:null};const e=t.payload.id,r=t.payload.data();return Object.assign({id:e},r)}),Object(o.a)(t=>"dummy"===t.id?Object(a.a)("null"):this.angularFireStore.collection("Users").doc(t.authorId).get().pipe(Object(i.a)(e=>Object.assign(Object.assign({},e.data()),t)))))}editStory(t,e){if(e.image){this.storage.ref(e.path).delete();const r=`StoryImages/${(new Date).getTime()}_${e.image.name}`,n=this.storage.ref(r);return this.storage.upload(r,e.image).then(t=>n.getDownloadURL().toPromise()).then(n=>this.angularFireStore.collection("Stories").doc(t).update({title:e.title,description:e.description,authorId:e.authorId,story:e.story,imageUrl:n,imagePath:r})).catch(t=>{console.log(t)})}return this.angularFireStore.collection("Stories").doc(t).update({title:e.title,story:e.story,description:e.description})}updateLike(t,e,r){return this.angularFireStore.collection("Stories").doc(t).update({likes:"increase"===r?e+1:e-1})}markFavourite(t){const e=this.auth.user||localStorage.getItem("userId");this.db.database.ref(e+"/likedStories").once("value").then(r=>r.val()?Object.values(r.val()).includes(t)?void 0:this.db.database.ref(e+"/likedStories").push(t):this.db.database.ref(e+"/likedStories").set([t]))}removeFromFavourite(t){const e=this.auth.user||localStorage.getItem("userId");this.db.database.ref(e+"/likedStories").once("value").then(r=>{const n=Object.values(r.val()).filter(e=>e!==t);return this.db.database.ref(e+"/likedStories").set(n)})}deleteStory(t,e){return this.storage.ref(t).delete(),this.angularFireStore.collection("Stories").doc(e).delete()}likedStories(){return Object(n.a)(this,void 0,void 0,(function*(){const t=this.auth.user||localStorage.getItem("userId"),e=yield(yield this.db.database.ref(t+"/likedStories").once("value")).val();return e?Object.values(e):null}))}getLikedStories(){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.likedStories();if(t){const e=t.map(t=>this.getStory(t));return Object(c.a)(e)}return Object(a.a)([])}))}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(u.a),l.Sb(d.a),l.Sb(h.a),l.Sb(g.a))},t.\u0275prov=l.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ZaV5:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));const n=async(t,e,r,n,i)=>{if(t)return t.attachViewToDom(e,r,i,n);if("string"!=typeof r&&!(r instanceof HTMLElement))throw new Error("framework delegate is missing");const o="string"==typeof r?e.ownerDocument&&e.ownerDocument.createElement(r):r;return n&&n.forEach(t=>o.classList.add(t)),i&&Object.assign(o,i),e.appendChild(o),o.componentOnReady&&await o.componentOnReady(),o},i=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},h3R7:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n={bubbles:{dur:1e3,circles:9,fn:(t,e,r)=>{const n=t*e/r-t+"ms",i=2*Math.PI*e/r;return{r:5,style:{top:9*Math.sin(i)+"px",left:9*Math.cos(i)+"px","animation-delay":n}}}},circles:{dur:1e3,circles:8,fn:(t,e,r)=>{const n=e/r,i=t*n-t+"ms",o=2*Math.PI*n;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":i}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,r)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/r-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,r)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/r-t+"ms"}})}}},lGQG:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("2Vo4"),i=r("fXoL"),o=r("UbJi"),s=r("I/3d");let a=(()=>{class t{constructor(t,e){this.auth=t,this.angularfire=e,this.userId=new n.a(null),this.auth.onAuthStateChanged(t=>{t?(this.userId.next(t.uid),localStorage.setItem("userId",t.uid)):(this.userId.next(null),localStorage.getItem("userId")&&localStorage.removeItem("userId"))})}getUserInfo(){return this.angularfire.collection("Users").doc(this.user||localStorage.getItem("userId")).valueChanges()}get user(){return this.userId.value||localStorage.getItem("userId")}signup({email:t,password:e}){return console.log(),this.auth.createUserWithEmailAndPassword(t,e)}login({email:t,password:e}){return this.auth.signInWithEmailAndPassword(t,e)}signout(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(i.Sb(o.a),i.Sb(s.a))},t.\u0275prov=i.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},qULd:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return a}));const n={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const r=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:r})},notification(t){const e=this.getEngine();if(!e)return;const r=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:r})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},i=()=>{n.selection()},o=()=>{n.selectionStart()},s=()=>{n.selectionChanged()},a=()=>{n.selectionEnd()},c=t=>{n.impact(t)}}}]);